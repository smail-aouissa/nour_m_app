(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{363:function(t,o,e){"use strict";e.r(o);var c=e(11),n=e(308),l=e(309),r={components:{Loader:e(310).a,Sidebar:n.a,AllProducts:l.a},data:function(){return{id:this.$route.params.id,busy:!1,loading:!1,type:{name:"Collection",url:"/collection"},sections:[],colors:[],sizes:[],prices:[],products:[],filter:{},page:1,endOfScroll:!1}},computed:{topProduct:function(){return Object(c.a)(this.products).sort((function(){return.5-Math.random()})).slice(0,3)}},mounted:function(){this.loadCollection(),this.loadProducts(this.filter)},methods:{loadCollection:function(){var t=this;this.$axios.$get("/collections").then((function(o){t.sections=o.sections,t.colors=o.colors,t.sizes=o.sizes})).catch((function(t){console.log(t)}))},loadProducts:function(data){var t=this;data&&(this.page=1,this.filter=data),this.id&&this.id>=0&&(this.loading=!0,this.busy=!0,this.$axios.$post("/collection/".concat(this.$route.params.id,"?page=").concat(this.page),this.filter).then((function(o){var e=o.products.data;if(data)t.products=e;else for(var i=0;i<e.length;i++)t.products.push(e[i]);t.loading=!1,t.page=o.current_page+1,o.next_page_url?setTimeout((function(){t.busy=!1}),500):t.endOfScroll=!0})).catch((function(o){t.loading=!1})))}}},d=e(12),component=Object(d.a)(r,(function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("div",[e("div",{staticClass:"page-title-area"},[e("div",{staticClass:"container"},[e("ul",[e("li",[e("nuxt-link",{attrs:{to:"/"}},[t._v("Accueil")])],1),t._v(" "),e("li",[t._v("Collection")])])])]),t._v(" "),e("section",{staticClass:"products-collections-area ptb-60"},[e("div",{staticClass:"container"},[t._m(0),t._v(" "),e("div",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:t.loadProducts,expression:"loadProducts"}],attrs:{"infinite-scroll-disabled":"busy","infinite-scroll-distance":"10"}},[e("div",{staticClass:"row"},[e("Sidebar",{attrs:{type:t.type,sections:t.sections,colors:t.colors,sizes:t.sizes,"top-products":t.topProduct},on:{"changed-filter":t.loadProducts}}),t._v(" "),e("AllProducts",{attrs:{products:t.products}})],1)]),t._v(" "),t.endOfScroll?e("div",{staticClass:"section-title"},[e("h2",[t._v("Vous êtes tous rattrapés")])]):t._e()])]),t._v(" "),e("Loader",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}]})],1)}),[function(){var t=this.$createElement,o=this._self._c||t;return o("div",{staticClass:"section-title"},[o("h2",[o("span",{staticClass:"dot"}),this._v(" Produits de la collection")])])}],!1,null,null,null);o.default=component.exports}}]);